<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Confirmation</title>
        <link rel="shortcut icon" href="./assets/turtlogo1.jpg" />
    
        <!--css link-->
        <link rel="stylesheet" href="./css/common.css">
        <link rel="stylesheet" href="./css/bookingsystem/confirmation.css">
    
        <!--google fonts-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Amarante&family=Anton&family=Inter:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
        <!-- JavaScript Links -->
        <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/intlTelInput.min.js"></script>

    </head>
<body>

    <!--Navbar-->

<nav>
    <div class="wrapper">

        <div class="top">
            <h2>TurtleTreasure</h2>
            <img src="./assets/Logo.png" alt="">
        </div>

        <div class="bottom">
            <div class="content-wrapper">
                <ul>
                    <li><a href="./Payment.html">Back</a></li>
                    <li><a href="#">Confirmation</a></li>
                </ul>
            </div>
        </div>

    </div>
</nav>

<div x-data="confirmation">
    <section id="main">
         
            <div class="summary">
                <div class="boundry">
                <h3 class="label3">Thank you for your order. 
                    Your order has been confirmed with us. 
                     You can show this confirmation at the entrance.
                      Following is the summary of your order.</h3>

                <Table class="table1">
                    <tr>
                        <td>Name</td>
                        <td><div x-text="guest.fullName"></td>
                    </tr>
                    <tr>
                        <td>Date</td>
                        <td><div x-text="selectedDate"></td>
                    </tr>
                    <tr>
                        <td>Selected Times</td>
                        <td>
                            <template x-for="timeIndex in selectedTimeSlots">
                                <div x-text="openTimes[timeIndex].title"></div>
                            </template>
                        </td>
                    </tr>
                    <tr>
                        <td>Duration</td>
                        <td x-text="selectedTimeSlots.length + ' Hrs' "></td>
                    </tr>
                    <tr>
                        <td>Mobile</td>
                        <td><div x-text="guest.mobile"></td>
                    </tr>
                    <tr>
                        <td>Email</td>
                        <td><div x-text="guest.email"></td>
                    </tr>
                    <tr>
                        <td>Gender</td>
                        <td><div x-text="guest.gender"></td>
                    </tr>
                    <tr class="tablehead1">
                        <td>Tickets</td>
                        <td>Charges</td>
                    </tr>
                    <template x-for="guestIndex in ticketTypes">
                        <tr>   
                                <td><div x-text="guestIndex.count+' - '+guestIndex.name"></div></td>
                                <td><div x-text="'$'+guestIndex.total"></div></td>  
                        </tr>
                    </template>
                    <tr class="tablehead1">
                        <td>Total Payable</td>
                        <td x-text="'$'+grandTotal"></td>
                    </tr>
                </Table>
                <div class="btnCenter"> 
                <button class="btnMainFull" x-on:click="gotoHome()" >HOME</button>
                </div>
                </div>
            </div>

    </section>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('confirmation', () => ({
                selectedDate : null,
                selectedTimeSlots : [],
                ticketTypes : [],
                grandTotal : null,
                guest : {},
                cardInfo : {},
                openTimes: [
    
                    {
                        title: '7AM to 8AM',
                        isPeak: false
                    },
                    {
                        title: '8AM to 9AM',
                        isPeak: false
                    },
                    {
                        title: '9AM to 10AM',
                        isPeak: false
                    },
                    {
                        title: '10AM to 11AM (Peak)',
                        isPeak: true
                    },
                    {
                        title: '11AM to 12PM (Peak)',
                        isPeak: true
                    },
                    {
                        title: '12PM to 1PM (Peak)',
                        isPeak: true
                    },
                    {
                        title: '1PM to 2PM',
                        isPeak: false
                    },
                    {
                        title: '2PM to 3PM',
                        isPeak: false
                    },
                    {
                        title: '3PM to 4PM (Peak)',
                        isPeak: true
                    },
                    {
                        title: '4PM to 5PM (Peak)',
                        isPeak: true
                    },
                    {
                        title: '5PM to 6PM (Peak)',
                        isPeak: true
                    },
                ],

                init() {

                    this.selectedDate = JSON.parse(localStorage.getItem('SavedDate'));
                    this.selectedTimeSlots = JSON.parse(localStorage.getItem('SavedTimeslot'));
                    this.ticketTypes = JSON.parse(localStorage.getItem('SavedTicketTypes'));
                    this.grandTotal = JSON.parse(localStorage.getItem('SavedTotal'));
                    this.guest = JSON.parse(localStorage.getItem('SavedGuest'));
                    this.cardInfo = JSON.parse(localStorage.getItem('SavedCardInfo'));

                    window.addEventListener('storage', (event) => {
                    if (event.key === null) {
                        window.location.href = 'tickets.html';
                        alert('Error with saved data, Please re-enter');
                    }
                    });
                },

                gotoHome() {
                    window.location.href = 'index.html'
                }
            }))
        })
    </script>

<!--Footer section-->

<footer>
    <div class="top">

        <div class="left">
            <img src="./assets/logo2.png" alt="footer-image" class="footer-img">
        </div>

        <div class="right">
            <div class="sec1">
                <a href="./index.html" >Home</a>
                <a href="./donate.html" >Donate</a>
            </div>

            <div class="sec2">
                <a href="#">Topics</a>
                <div class="sub-sec2">
                    <a href="./turtlecat.html">Turtle categories</a>
                    <a href="./threats.html">Threats to turtles</a>
                </div>
            </div>

            <div class="sec3">
                <a href="./topics.html">Hatcheries</a>
                <div class="sub-sec3">
                    <a href="./hikka-th.html">Hikkaduwa turtle hatchery</a>
                    <a href="./kosgoda-th.html">Kosgoda turtle hatchery</a>
                    <a href="./bentota-th.html">Bentota  turtle hatchery</a>
                </div>
            </div>
        </div>

    </div>

    <div class="bottom">
        Copyrights @CB011281 2023.allrights reserved
    </div>

</footer>
    
</body>
</html>