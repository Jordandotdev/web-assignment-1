<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Payment</title>
        <link rel="shortcut icon" href="./assets/turtlogo1.jpg" />
    
        <!--css link-->
        <link rel="stylesheet" href="./css/common.css">
        <link rel="stylesheet" href="./css/bookingsystem/payment.css">
    
        <!--google fonts-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Amarante&family=Anton&family=Inter:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
        <!-- JavaScript Links -->
        <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/intlTelInput.min.js"></script>


    </head>
<body>

    <!--Navbar-->

<nav>
    <div class="wrapper">

        <div class="top">
            <h2>TurtleTreasure</h2>
            <img src="./assets/Logo.png" alt="">
        </div>

        <div class="bottom">
            <div class="content-wrapper">
                <ul>
                    <li><a href="./details.html">Back</a></li>
                    <li><a href="#">Payment</a></li>
                </ul>
            </div>
        </div>

    </div>
</nav>

<div x-data="payment">
    <section id="main">
        <div id="left">
    
            <form x-on:submit.prevent="gotoConfirm">
                <div class="inp1">
                    <label for="cardInfo">Card Number</label>
                    <input type="text" name="cardNumber" id="cardNumber" x-model="cardInfo.cardNumber" required>
                </div>
                <div class="row-wrapper">
                    <div class="inp1">
                        <label for="expiryDate">Expiry Date</label>
                        <input type="text" name="expiryDate" id="expiryDate" x-model="cardInfo.expiryDate">
                    </div>
                    <div class="inp1">
                        <label for="expiryDate">CCV/CVV</label>
                        <input type="text" name="expiryDate" id="expiryDate" x-model="cardInfo.CCV">
                    </div>
                </div>
                <div class="inp1">
                    <label for="cardName">Name on Card</label>
                    <input type="text" name="cardName" id="cardName" x-model="cardInfo.cardName">
                </div>
                <div>
                    <button class="btnMain" type="submit">Pay <span x-text="'$'+grandTotal"></span></button>
                </div>
            </form>
    
        </div>
    
        <div id="right">
            
            <div class="summary">
                <h2>Order Summary</h2>
                <Table class="table1">
                    <tr>
                        <td>Date</td>
                        <td><div x-text="selectedDate"></td>
                    </tr>
                    <tr>
                        <td>Selected Times</td>
                        <td>
                            <template x-for="timeIndex in selectedTimeSlots">
                                <div x-text="openTimes[timeIndex].title"></div>
                            </template>
                        </td>
                    </tr>
                    <tr>
                        <td>Duration</td>
                        <td x-text="selectedTimeSlots.length + ' Hrs' "></td>
                    </tr>
                    <tr class="tablehead1">
                        <td>Tickets</td>
                        <td>Charges</td>
                    </tr>
                    <template x-for="guestIndex in ticketTypes">
                        <tr>   
                                <td><div x-text="guestIndex.count+' - '+guestIndex.name"></div></td>
                                <td><div x-text="'$'+guestIndex.total"></div></td>  
                        </tr>
                    </template>
                    <tr>
                        <td>Total Payable</td>
                        <td x-text="'$'+grandTotal"></td>
                    </tr>
                </Table>
            </div>
    
        </div>
    </section>
    </div>
    
    
    
    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('payment', () => ({
                selectedDate : null,
                selectedTimeSlots : [],
                ticketTypes : [],
                grandTotal : null,
                openTimes: [
    
                    {
                        title: '7AM to 8AM',
                        isPeak: false
                    },
                    {
                        title: '8AM to 9AM',
                        isPeak: false
                    },
                    {
                        title: '9AM to 10AM',
                        isPeak: false
                    },
                    {
                        title: '10AM to 11AM (Peak)',
                        isPeak: true
                    },
                    {
                        title: '11AM to 12PM (Peak)',
                        isPeak: true
                    },
                    {
                        title: '12PM to 1PM (Peak)',
                        isPeak: true
                    },
                    {
                        title: '1PM to 2PM',
                        isPeak: false
                    },
                    {
                        title: '2PM to 3PM',
                        isPeak: false
                    },
                    {
                        title: '3PM to 4PM (Peak)',
                        isPeak: true
                    },
                    {
                        title: '4PM to 5PM (Peak)',
                        isPeak: true
                    },
                    {
                        title: '5PM to 6PM (Peak)',
                        isPeak: true
                    },
                ],
    
                cardInfo: {
                    cardNumber: '',
                    expiryDate: '',
                    CCV: '',
                    cardName: ''
                },

                init() {
                    this.selectedDate = JSON.parse(localStorage.getItem('SavedDate'));
                    this.selectedTimeSlots = JSON.parse(localStorage.getItem('SavedTimeslot'));
                    this.ticketTypes = JSON.parse(localStorage.getItem('SavedTicketTypes'));
                    this.grandTotal = JSON.parse(localStorage.getItem('SavedTotal'));

                    window.addEventListener('storage', (event) => {
                    if (event.key === null) {
                        window.location.href = 'tickets.html';
                        alert('Error with saved data, Please re-enter');
                    }
                    });
                },

                gotoConfirm() {
                    // set the guest data to local storage
                    localStorage.setItem('SavedCardInfo', JSON.stringify(this.cardInfo))
 
                    window.location.href = 'Confirmation.html'
                }
            }))
        })
    </script>

<!--Footer section-->

<footer>
    <div class="top">

        <div class="left">
            <img src="./assets/logo2.png" alt="footer-image" class="footer-img">
        </div>

        <div class="right">
            <div class="sec1">
                <a href="./index.html" >Home</a>
                <a href="./donate.html" >Donate</a>
            </div>

            <div class="sec2">
                <a href="#">Topics</a>
                <div class="sub-sec2">
                    <a href="./turtlecat.html">Turtle categories</a>
                    <a href="./threats.html">Threats to turtles</a>
                </div>
            </div>

            <div class="sec3">
                <a href="./topics.html">Hatcheries</a>
                <div class="sub-sec3">
                    <a href="./hikka-th.html">Hikkaduwa turtle hatchery</a>
                    <a href="./kosgoda-th.html">Kosgoda turtle hatchery</a>
                    <a href="./bentota-th.html">Bentota  turtle hatchery</a>
                </div>
            </div>
        </div>

    </div>

    <div class="bottom">
        Copyrights @CB011281 2023.allrights reserved
    </div>

</footer>
    
</body>
</html>